version: '3'
services:
  mysql-nodeps:
    image: mysql:latest
    entrypoint: ['docker-entrypoint.sh', '--default-authentication-plugin=mysql_native_password']
    restart: always
    volumes:
      - ./database-mysql:/var/lib/mysql:cached
    environment:
      MYSQL_PASSWORD: "${DB_PASSWORD}"
      MYSQL_USER: "${DB_USER}"
      MYSQL_DATABASE: "${DB_NAME}"
      MYSQL_ALLOW_EMPTY_PASSWORD: 1
    ports:
      - "${DB_PORT}:3306"
    security_opt:
      - seccomp:unconfined

  redis-nodeps:
    image: redis
    ports:
      - "${REDIS_PORT}:6379"
